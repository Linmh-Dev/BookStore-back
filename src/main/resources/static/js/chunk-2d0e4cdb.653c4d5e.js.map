{"version":3,"sources":["webpack:///./src/views/AddBook.vue?b366","webpack:///src/views/AddBook.vue","webpack:///./src/views/AddBook.vue?9833","webpack:///./src/views/AddBook.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","ref","form","model","value","callback","$$v","$set","expression","_v","staticClass","uploadSuccess","uploadError","fileList","$store","state","url","slot","on","onSubmit","cancel","staticRenderFns","name","props","data","update","pnum","price","category","description","imgurl","mounted","console","log","book","methods","clear","id","response","code","axios","method","headers","message","type","error","$refs","upload","submit","component"],"mappings":"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","file":"js/chunk-2d0e4cdb.653c4d5e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-col',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"span\":10,\"offset\":4}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"书名\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"价格\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"size\":\"small\",\"precision\":2,\"min\":0,\"step\":1.0,\"max\":1000},model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1)]),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-radio-group',{model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-radio',{attrs:{\"label\":'文学'}},[_vm._v(\"文学\")]),_c('el-radio',{attrs:{\"label\":'生活'}},[_vm._v(\"生活\")]),_c('el-radio',{attrs:{\"label\":'计算机'}},[_vm._v(\"计算机\")]),_c('el-radio',{attrs:{\"label\":'外语'}},[_vm._v(\"外语\")]),_c('el-radio',{attrs:{\"label\":'经营'}},[_vm._v(\"经营\")]),_c('el-radio',{attrs:{\"label\":'励志'}},[_vm._v(\"励志\")]),_c('el-radio',{attrs:{\"label\":'科学'}},[_vm._v(\"科学\")]),_c('el-radio',{attrs:{\"label\":'学术'}},[_vm._v(\"学术\")]),_c('el-radio',{attrs:{\"label\":'少儿'}},[_vm._v(\"少儿\")]),_c('el-radio',{attrs:{\"label\":'艺术'}},[_vm._v(\"艺术\")]),_c('el-radio',{attrs:{\"label\":'科技'}},[_vm._v(\"科技\")]),_c('el-radio',{attrs:{\"label\":'考试'}},[_vm._v(\"考试\")]),_c('el-radio',{attrs:{\"label\":'生活百科'}},[_vm._v(\"生活百科\")])],1)])],1),_c('el-form-item',{attrs:{\"label\":\"库存数量\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-input-number',{attrs:{\"size\":\"small\",\"min\":0,\"max\":10000},model:{value:(_vm.form.pnum),callback:function ($$v) {_vm.$set(_vm.form, \"pnum\", $$v)},expression:\"form.pnum\"}})],1)]),_c('el-form-item',{attrs:{\"label\":\"书籍描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"on-success\":_vm.uploadSuccess,\"on-error\":_vm.uploadError,\"multiple\":false,\"auto-upload\":false,\"limit\":1,\"file-list\":_vm.fileList,\"name\":\"cover\",\"action\":_vm.$store.state.url+'/bookCover'}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即添加\")]),_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <el-row>\n    <el-col :span=\"10\" :offset=\"4\" style=\"margin-top: 20px\">\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n<!--        <el-form-item label=\"书籍ID\">\n          <el-input v-model=\"form.id\"></el-input>\n        </el-form-item>-->\n        <el-form-item label=\"书名\">\n          <el-input v-model=\"form.name\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"价格\">\n          <div style=\"text-align: left\">\n            <el-input-number controls-position=\"right\" size=\"small\" v-model=\"form.price\" :precision=\"2\" :min=\"0\" :step=\"1.0\" :max=\"1000\"></el-input-number>\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"类型\">\n          <el-radio-group v-model=\"form.category\">\n            <div style=\"text-align: left\">\n              <el-radio :label=\"'文学'\">文学</el-radio>\n              <el-radio :label=\"'生活'\">生活</el-radio>\n              <el-radio :label=\"'计算机'\">计算机</el-radio>\n              <el-radio :label=\"'外语'\">外语</el-radio>\n              <el-radio :label=\"'经营'\">经营</el-radio>\n              <el-radio :label=\"'励志'\">励志</el-radio>\n              <el-radio :label=\"'科学'\">科学</el-radio>\n              <el-radio :label=\"'学术'\">学术</el-radio>\n              <el-radio :label=\"'少儿'\">少儿</el-radio>\n              <el-radio :label=\"'艺术'\">艺术</el-radio>\n              <el-radio :label=\"'科技'\">科技</el-radio>\n              <el-radio :label=\"'考试'\">考试</el-radio>\n              <el-radio :label=\"'生活百科'\">生活百科</el-radio>\n            </div>\n          </el-radio-group>\n        </el-form-item>\n\n        <el-form-item label=\"库存数量\">\n          <div style=\"text-align: left\">\n            <el-input-number  size=\"small\" v-model=\"form.pnum\" :min=\"0\" :max=\"10000\" ></el-input-number>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"书籍描述\">\n          <el-input type=\"textarea\" v-model=\"form.description\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"封面\">\n          <el-upload\n              ref=\"upload\"\n              class=\"upload-demo\"\n              drag\n              :on-success=\"uploadSuccess\"\n              :on-error=\"uploadError\"\n              :multiple=\"false\"\n              :auto-upload=\"false\"\n              :limit=\"1\"\n              :file-list=\"fileList\"\n              name=\"cover\"\n              :action=\"$store.state.url+'/bookCover'\">\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n            <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\n          </el-upload>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"onSubmit\">立即添加</el-button>\n          <el-button @click=\"cancel\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-col>\n  </el-row>\n</div>\n</template>\n\n<script>\nexport default {\n  name: \"AddBook\",\n  props:['book','cancel'],\n  data() {\n    return {\n      update:false,\n      fileList: [],\n        form: {\n        name: '',\n        pnum: 0,\n        price: 0,\n        category: '',\n        description: '',\n        imgurl:''\n      }\n    }\n  },\n  mounted() {\n    console.log(this.book)\n    if (this.book!=null){\n      this.form=this.book\n      this.update=true\n    }\n  },\n  methods: {\n    clear(){\n      this.form={\n        id:'',\n        name: '',\n        pnum: 0,\n        price: 0,\n        category: '',\n        description: '',\n        imgurl:''\n      }\n      this.fileList = [];\n    },\n    uploadSuccess(response, file, fileList){\n      console.log(response.data)\n      if (response.code===200){\n        this.form.imgurl = response.data\n        axios({\n          method: \"post\",\n          url:\"book\",\n          headers:{\n            'Content-Type': 'application/json'\n          },\n          data:this.form\n        }).then( (response)=> {\n          console.log(response)\n          this.$message({\n            message: \"上传成功 \",\n            type: 'success'\n          });\n          this.cancel()\n        },  (error)=> {\n          console.log(error)\n        })\n      }else {\n        console.log(\"上传失败\")\n      }\n      this.clear()\n    },\n    uploadError(err, file, fileList){\n      console.log(\"上传失败\")\n      this.clear()\n    },\n    onSubmit() {\n      if (this.update){\n        axios({\n          url:'book',\n          method:'put',\n          headers:{\n            'Content-Type': 'application/json'\n          },\n          data:this.form\n        }).then((response)=>{\n          if (response.data.code===200){\n            this.$message({\n              message: \"修改成功\",\n              type: 'success'\n            });\n            this.cancel()\n          }\n        })\n      }else{\n        this.$refs.upload.submit()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddBook.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddBook.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddBook.vue?vue&type=template&id=09665cce&scoped=true&\"\nimport script from \"./AddBook.vue?vue&type=script&lang=js&\"\nexport * from \"./AddBook.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09665cce\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500ec345","chunk-c4bc0f34"],{"1d56":function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[l("el-table-column",{attrs:{width:"150",label:"用户名",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.name))])]}}])}),l("el-table-column",{attrs:{width:"180",label:"密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.pass))])]}}])}),l("el-table-column",{attrs:{width:"80",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.gender))])]}}])}),l("el-table-column",{attrs:{label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.email))])]}}])}),l("el-table-column",{attrs:{label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(t.row.telephone))])]}}])}),l("el-table-column",{attrs:{width:"120",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:0===t.row.state?"success":"danger"}},[e._v(" "+e._s(e.stateConverter(t.row.state))+" ")])]}}])}),l("el-table-column",{attrs:{label:"身份"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(e.roleConverter(t.row.role)))])]}}])}),l("el-table-column",{attrs:{label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",[e._v(e._s(e.timeConverter(t.row.registTime)))])]}}])}),l("el-table-column",{attrs:{width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",icon:"el-icon-edit-outline"},on:{click:function(l){return e.handleEdit(t.row)}}},[e._v("编辑 ")])]}}])}),l("el-table-column",{attrs:{width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(l){return e.handleDelete(t.row,t.$index)}}},[e._v("删除 ")])]}}])})],1),l("el-dialog",{attrs:{modal:"",title:"提示",visible:e.dialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-row",[l("el-col",{attrs:{span:12,offset:6}},[l("el-form",{attrs:{"label-width":"80px"}},[l("el-form-item",{attrs:{label:"用户名"}},[l("el-input",{model:{value:e.selectUser.name,callback:function(t){e.$set(e.selectUser,"name",t)},expression:"selectUser.name"}})],1),l("el-form-item",{attrs:{label:"密码"}},[l("el-input",{model:{value:e.selectUser.pass,callback:function(t){e.$set(e.selectUser,"pass",t)},expression:"selectUser.pass"}})],1),l("el-form-item",{attrs:{label:"性别"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectUser.gender,callback:function(t){e.$set(e.selectUser,"gender",t)},expression:"selectUser.gender"}},e._l(e.sex,(function(e){return l("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"邮箱"}},[l("el-input",{model:{value:e.selectUser.email,callback:function(t){e.$set(e.selectUser,"email",t)},expression:"selectUser.email"}})],1),l("el-form-item",{attrs:{label:"手机号"}},[l("el-input",{model:{value:e.selectUser.telephone,callback:function(t){e.$set(e.selectUser,"telephone",t)},expression:"selectUser.telephone"}})],1),l("el-form-item",{attrs:{label:"状态"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectUser.state,callback:function(t){e.$set(e.selectUser,"state",t)},expression:"selectUser.state"}},e._l(e.state,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",{attrs:{label:"身份"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectUser.role,callback:function(t){e.$set(e.selectUser,"role",t)},expression:"selectUser.role"}},e._l(e.role,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)],1)},a=[],s=(l("ac1f"),l("1276"),l("a434"),l("73cf")),o={name:"UserManagement",components:{Register:s["default"]},data:function(){return{selectUser:{},tableData:[],dialogVisible:!1,sex:[{value:"男"},{value:"女"}],state:[{value:-1,label:"禁用"},{value:0,label:"激活"}],role:[{value:"普通用户",label:"普通用户"},{value:"Admin",label:"管理员"}]}},methods:{onSubmit:function(){var e=this;axios({url:"user",method:"put",data:this.selectUser}).then((function(t){200===t.data.code?(e.dialogVisible=!1,e.$message({message:"保存成功",type:"success"})):e.$message({message:"保存失败",type:"error"})}))},handleEdit:function(e){this.selectUser=e,this.dialogVisible=!0},stateConverter:function(e){return 0===e?"已激活":"已禁用"},timeConverter:function(e){return e.split("T")[0]},roleConverter:function(e){return"Admin"===e?"管理员":e},handleDelete:function(e,t){var l=this;axios({url:"user/"+e.id,method:"delete"}).then((function(e){200===e.data.code?(l.dialogVisible=!1,l.$message({message:"删除成功",type:"success"}),l.tableData.splice(t,1)):l.$message({message:"删除失败",type:"error"})}))}},mounted:function(){var e=this;axios({url:"user/all",method:"get"}).then((function(t){200===t.data.code&&(e.tableData=t.data.data)}))}},n=o,i=l("2877"),u=Object(i["a"])(n,r,a,!1,null,"043347cd",null);t["default"]=u.exports},"73cf":function(e,t,l){"use strict";l.r(t);var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"register"}},[l("el-row",[l("el-col",{attrs:{span:6,offset:9}},[l("h1",{staticStyle:{color:"#606266"}},[l("i",{staticClass:"el-icon-user-solid"}),e._v(" 新用户注册")])])],1),l("el-row",[l("el-col",{attrs:{span:8,offset:8}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"status-icon":"",rules:e.rules,model:e.ruleForm,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"用户名",prop:"name"}},[l("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),l("el-form-item",{attrs:{label:"密码",prop:"pass"}},[l("el-input",{attrs:{type:"password","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),l("el-form-item",{attrs:{label:"重复密码",prop:"verifyPass"}},[l("el-input",{attrs:{type:"password","show-password":""},model:{value:e.ruleForm.verifyPass,callback:function(t){e.$set(e.ruleForm,"verifyPass",t)},expression:"ruleForm.verifyPass"}})],1),l("el-row",[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"性别"}},[l("el-radio-group",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[l("el-radio",{attrs:{label:"男"}}),l("el-radio",{attrs:{label:"女"}})],1)],1)],1)],1),l("el-form-item",{attrs:{label:"手机号码",prop:"telphone"}},[l("el-input",{attrs:{type:"tel"},model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",t)},expression:"ruleForm.telephone"}})],1),l("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[l("el-input",{attrs:{type:"email",autocomplete:"off"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),l("el-form-item",{attrs:{label:"个人介绍",prop:"introduce"}},[l("el-input",{attrs:{type:"textarea",maxlength:"100"},model:{value:e.ruleForm.introduce,callback:function(t){e.$set(e.ruleForm,"introduce",t)},expression:"ruleForm.introduce"}})],1),l("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[l("el-row",[l("el-col",{attrs:{span:6}},[l("el-input",{attrs:{type:"tel"},model:{value:e.ruleForm.validateCode,callback:function(t){e.$set(e.ruleForm,"validateCode",t)},expression:"ruleForm.validateCode"}})],1),l("el-col",{attrs:{span:6,offset:1}},[e.showValidate?l("el-image",{attrs:{src:e.validateUrl}}):e._e()],1),l("el-col",{attrs:{span:10}},[l("el-link",{attrs:{underline:!1,type:"primary"},on:{click:e.switchValidate}},[e._v("看不清？换一张")])],1)],1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册 ")]),l("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重填")])],1)],1)],1)],1)],1)},a=[],s=/^[\w-]+@([\w-]+\.)+[a-zA-Z]{2,4}$/,o=/^[a-zA-Z]\w{0,9}$/,n=/^.{6,16}$/,i=/^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\d{8}$/,u={name:"Register",data:function(){var e=this,t=function(t,l,r){""===l?r(new Error("请输入邮箱")):(console.log(e.ruleForm.email),s.test(l)||r(new Error("请输入有效的邮箱地址")),r())},l=function(e,t,l){""===t?l(new Error("请输入会员名")):(o.test(t)||l(new Error("字母数字下划线1到10位，不能是数字开头")),l())},r=function(e,t,l){""===t?l(new Error("请输入密码")):(n.test(t)||l(new Error("密码不合法")),l())},a=function(t,l,r){""===l?r(new Error("请再次输入密码")):l!==e.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()},u=function(e,t,l){""===t?l(new Error("请输入手机号码")):(i.test(t)||l(new Error("请输入有效的手机号码")),l())};return{showValidate:!0,validateUrl:this.$store.state.url+"/validateCode",ruleForm:{name:"",introduce:"",pass:"",gender:"男",email:"",telephone:"",verifyPass:"",validateCode:""},rules:{pass:[{validator:r,trigger:"blur"}],verifyPass:[{validator:a,trigger:"blur"}],email:[{validator:t,trigger:"blur"}],name:[{validator:l,trigger:"blur"}],telephone:[{validator:u,trigger:"blur"}]}}},methods:{switchValidate:function(){this.validateUrl=this.$store.state.url+"/validateCode?"+Math.random()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error"),!1;axios({method:"post",headers:{"Content-Type":"application/json"},url:"user",data:t.ruleForm}).then((function(e){console.log(e),200===e.data.code?(t.$message({message:"注册成功",type:"success"}),t.$router.push("/login")):t.$message({message:e.data.data,type:"error"})}))}))},resetForm:function(e){this.ruleForm={name:"",introduce:"",pass:"",gender:"男",email:"",telephone:"",verifyPass:""},this.$refs[e].resetFields()}}},c=u,m=(l("e30a"),l("2877")),d=Object(m["a"])(c,r,a,!1,null,"2c1a0576",null);t["default"]=d.exports},dd61:function(e,t,l){},e30a:function(e,t,l){"use strict";l("dd61")}}]);
//# sourceMappingURL=chunk-500ec345.c243f7d0.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac2df2a2","chunk-2d0e4cdb"],{2532:function(e,t,a){"use strict";var l=a("23e7"),o=a("5a34"),i=a("1d80"),n=a("577e"),r=a("ab13");l({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~n(i(this)).indexOf(n(o(e)),arguments.length>1?arguments[1]:void 0)}})},"4de4":function(e,t,a){"use strict";var l=a("23e7"),o=a("b727").filter,i=a("1dde"),n=i("filter");l({target:"Array",proto:!0,forced:!n},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,a){var l=a("44e7");e.exports=function(e){if(l(e))throw TypeError("The method doesn't accept regular expressions");return e}},"81bc":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{size:"mini",placeholder:"商品编号"},model:{value:e.orderId,callback:function(t){e.orderId=t},expression:"orderId"}})],1),a("el-col",{attrs:{span:6,offset:4}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)]),a("el-col",{attrs:{span:2,offset:4}},[a("el-button",{attrs:{type:"success",round:"",icon:"el-icon-plus"},on:{click:e.addBook}},[e._v("添加书籍")])],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{size:"mini",placeholder:"商品名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:6,offset:4}},[a("div",{staticStyle:{display:"inline-flex","text-align":"left"}},[a("el-input",{attrs:{size:"mini",placeholder:"最低价格"},model:{value:e.minPrice,callback:function(t){e.minPrice=t},expression:"minPrice"}}),a("strong",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[e._v(" - ")]),a("el-input",{attrs:{size:"mini",placeholder:"最高价格"},model:{value:e.maxPrice,callback:function(t){e.maxPrice=t},expression:"maxPrice"}})],1)])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataFilter}},[a("el-table-column",{attrs:{label:"商品编号",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"商品名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"商品价格",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),a("el-table-column",{attrs:{label:"商品库存",prop:"pnum"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pnum))])]}}])}),a("el-table-column",{attrs:{label:"商品类别",prop:"category"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.category))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit-outline"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row,t.$index)}}},[e._v("删除 ")])]}}])})],1),a("el-dialog",{attrs:{modal:"",title:"提示",visible:e.dialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("AddBook",{attrs:{book:e.selectBook,cancel:e.cancelCallback}})],1)],1)},o=[],i=(a("4de4"),a("b0c0"),a("caad"),a("2532"),a("159b"),a("a434"),a("927c")),n={name:"ProductManagement",components:{AddBook:i["default"]},data:function(){return{selectBook:null,dialogVisible:!1,tableData:[],category:"",name:"",orderId:"",minPrice:0,maxPrice:1e3,options:[{value:"1",label:"文学"},{value:"2",label:"生活"},{value:"3",label:"计算机"},{value:"4",label:"外语"},{value:"5",label:"经营"},{value:"6",label:"励志"},{value:"7",label:"科学"},{value:"8",label:"学术"},{value:"9",label:"少儿"},{value:"10",label:"艺术"},{value:"11",label:"科技"},{value:"12",label:"考试"},{value:"13",label:"生活百科"}]}},computed:{tableDataFilter:function(){var e=this;return this.tableData.filter((function(t){return!e.name||t.name.toLowerCase().includes(e.name.toLowerCase())})).filter((function(t){return!e.orderId||t.id===e.orderId})).filter((function(t){return!e.category||t.category===e.category})).filter((function(t){return t.price>=e.minPrice&&t.price<=e.maxPrice}))}},methods:{addBook:function(){this.dialogVisible=!0},cancelCallback:function(){var e=this;this.dialogVisible=!1,axios({url:"book",method:"get"}).then((function(t){if(200===t.data.code){var a=t.data.data;a.forEach((function(e){e.editState=!1})),e.tableData=a}}))},handleEdit:function(e){this.selectBook=e,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;console.log(t),axios({url:"book/"+e.id,method:"delete"}).then((function(l){200===l.data.code&&(a.$message({message:"删除《"+e.name+"》成功",type:"success"}),a.tableData.splice(t,1))}))}},mounted:function(){var e=this;axios({url:"book",method:"get"}).then((function(t){if(200===t.data.code){var a=t.data.data;a.forEach((function(e){e.editState=!1})),e.tableData=a}}))}},r=n,s=a("2877"),c=Object(s["a"])(r,l,o,!1,null,"66054a15",null);t["default"]=c.exports},"927c":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:10,offset:4}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"书名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"价格"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-input-number",{attrs:{"controls-position":"right",size:"small",precision:2,min:0,step:1,max:1e3},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)]),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-radio",{attrs:{label:"文学"}},[e._v("文学")]),a("el-radio",{attrs:{label:"生活"}},[e._v("生活")]),a("el-radio",{attrs:{label:"计算机"}},[e._v("计算机")]),a("el-radio",{attrs:{label:"外语"}},[e._v("外语")]),a("el-radio",{attrs:{label:"经营"}},[e._v("经营")]),a("el-radio",{attrs:{label:"励志"}},[e._v("励志")]),a("el-radio",{attrs:{label:"科学"}},[e._v("科学")]),a("el-radio",{attrs:{label:"学术"}},[e._v("学术")]),a("el-radio",{attrs:{label:"少儿"}},[e._v("少儿")]),a("el-radio",{attrs:{label:"艺术"}},[e._v("艺术")]),a("el-radio",{attrs:{label:"科技"}},[e._v("科技")]),a("el-radio",{attrs:{label:"考试"}},[e._v("考试")]),a("el-radio",{attrs:{label:"生活百科"}},[e._v("生活百科")])],1)])],1),a("el-form-item",{attrs:{label:"库存数量"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-input-number",{attrs:{size:"small",min:0,max:1e4},model:{value:e.form.pnum,callback:function(t){e.$set(e.form,"pnum",t)},expression:"form.pnum"}})],1)]),a("el-form-item",{attrs:{label:"书籍描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"封面"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","on-success":e.uploadSuccess,"on-error":e.uploadError,multiple:!1,"auto-upload":!1,limit:1,"file-list":e.fileList,name:"cover",action:e.$store.state.url+"/bookCover"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即添加")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},o=[],i={name:"AddBook",props:["book","cancel"],data:function(){return{update:!1,fileList:[],form:{name:"",pnum:0,price:0,category:"",description:"",imgurl:""}}},mounted:function(){console.log(this.book),null!=this.book&&(this.form=this.book,this.update=!0)},methods:{clear:function(){this.form={id:"",name:"",pnum:0,price:0,category:"",description:"",imgurl:""},this.fileList=[]},uploadSuccess:function(e,t,a){var l=this;console.log(e.data),200===e.code?(this.form.imgurl=e.data,axios({method:"post",url:"book",headers:{"Content-Type":"application/json"},data:this.form}).then((function(e){console.log(e),l.$message({message:"上传成功 ",type:"success"}),l.cancel()}),(function(e){console.log(e)}))):console.log("上传失败"),this.clear()},uploadError:function(e,t,a){console.log("上传失败"),this.clear()},onSubmit:function(){var e=this;this.update?axios({url:"book",method:"put",headers:{"Content-Type":"application/json"},data:this.form}).then((function(t){200===t.data.code&&(e.$message({message:"修改成功",type:"success"}),e.cancel())})):this.$refs.upload.submit()}}},n=i,r=a("2877"),s=Object(r["a"])(n,l,o,!1,null,"09665cce",null);t["default"]=s.exports},ab13:function(e,t,a){var l=a("b622"),o=l("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(l){}}return!1}},caad:function(e,t,a){"use strict";var l=a("23e7"),o=a("4d64").includes,i=a("44d2");l({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=chunk-ac2df2a2.251e85d9.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43d44423"],{2532:function(e,t,r){"use strict";var n=r("23e7"),o=r("5a34"),a=r("1d80"),l=r("577e"),s=r("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~l(a(this)).indexOf(l(o(e)),arguments.length>1?arguments[1]:void 0)}})},"4de4":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").filter,a=r("1dde"),l=a("filter");n({target:"Array",proto:!0,forced:!l},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,r){var n=r("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6b22":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticStyle:{margin:"10px"},attrs:{gutter:10}},[r("el-col",{attrs:{span:6}},[r("el-input",{attrs:{size:"mini",placeholder:"订单编号"},model:{value:e.orderId,callback:function(t){e.orderId=t},expression:"orderId"}})],1),r("el-col",{attrs:{span:6,offset:4}},[r("el-input",{attrs:{size:"mini",placeholder:"收件人"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataFilter}},[r("el-table-column",{attrs:{label:"订单编号",width:"200",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.id))])]}}])}),r("el-table-column",{attrs:{label:"收件人",width:"100",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.receiverName))])]}}])}),r("el-table-column",{attrs:{label:"地址",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.receiverAddress))])]}}])}),r("el-table-column",{attrs:{label:"联系电话",width:"150",prop:"pnum"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.receiverPhone))])]}}])}),r("el-table-column",{attrs:{width:"100",label:"总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.order.money))])]}}])}),r("el-table-column",{attrs:{width:"100",label:"所属用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.username))])]}}])}),r("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.handlePayState(t.row.order.payState)))])]}}])}),r("el-table-column",{attrs:{width:"400",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(r){return e.handleWatch(t.row)}}},[e._v("查看详情 ")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row,t.$index)}}},[e._v("删除 ")]),2!==t.row.order.payState?r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-s-promotion"},on:{click:function(r){return e.handleDeliver(t.row)}}},[e._v("发货 ")]):e._e()]}}])})],1),r("el-dialog",{attrs:{modal:"",title:"提示",visible:e.dialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("OrderDetail",{attrs:{order:e.selectOrder}})],1)],1)},o=[],a=(r("4de4"),r("b0c0"),r("caad"),r("2532"),r("a434"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-descriptions",{staticClass:"margin-top",attrs:{title:"订单详细信息",column:3}},[r("el-descriptions-item",{attrs:{label:"订单编号"}},[e._v(e._s(e.order.order.id))]),r("el-descriptions-item",{attrs:{label:"所属用户"}},[e._v(e._s(e.order.username))]),r("el-descriptions-item",{attrs:{label:"收件人"}},[e._v(e._s(e.order.order.receiverName))]),r("el-descriptions-item",{attrs:{label:"联系电话"}},[e._v(e._s(e.order.order.receiverPhone))]),r("el-descriptions-item",{attrs:{label:"收货地址"}},[e._v(e._s(e.order.order.receiverAddress))]),r("el-descriptions-item",{attrs:{label:"总价"}},[e._v(e._s(e.order.order.money))]),r("el-descriptions-item",{attrs:{label:"下单时间"}},[e._v(e._s(e.timeConvertor(e.order.order.orderTime)))])],1),r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.order.orderItems}},[r("el-table-column",{attrs:{label:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.book.id))])]}}])}),r("el-table-column",{attrs:{label:"商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{height:"80px",width:"50px"},attrs:{src:e.$store.state.url+t.row.book.imgurl}})]}}])}),r("el-table-column",{attrs:{label:"商品名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.book.name))])]}}])}),r("el-table-column",{attrs:{label:"商品价格",prop:"price"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.book.price))])]}}])}),r("el-table-column",{attrs:{label:"购买数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.buyNum))])]}}])}),r("el-table-column",{attrs:{label:"商品类别",prop:"category"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.book.category))])]}}])}),r("el-table-column",{attrs:{label:"商品描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.book.description))])]}}])})],1)],1)],1)}),l=[],s=(r("ac1f"),r("1276"),{name:"OrderDetail",tableData:[],props:["order"],methods:{timeConvertor:function(e){return e.split("T")[0]}}}),i=s,d=r("2877"),c=Object(d["a"])(i,a,l,!1,null,"fd499826",null),u=c.exports,p={name:"OrderManagement",components:{OrderDetail:u},data:function(){return{selectOrder:{},dialogVisible:!1,tableData:[],name:"",orderId:""}},computed:{tableDataFilter:function(){var e=this;return this.tableData.filter((function(t){return!e.name||t.order.receiverName.toLowerCase().includes(e.name.toLowerCase())})).filter((function(t){return!e.orderId||t.order.id===e.orderId}))}},methods:{handleDeliver:function(e){var t=this;axios({url:"deliver/"+e.order.id,method:"put"}).then((function(r){200===r.data.code&&(e.order.payState=2,t.$message({message:"发货完成",type:"success"}))}))},handlePayState:function(e){return 0===e?"未支付":1===e?"待发货":"已完成"},cancelCallback:function(){this.dialogVisible=!1},handleWatch:function(e){this.selectOrder=e,this.dialogVisible=!0},handleDelete:function(e,t){var r=this;axios({url:"order/"+e.order.id,method:"delete"}).then((function(e){200===e.data.code&&(r.$message({message:"删除订单成功",type:"success"}),r.tableData.splice(t,1))}))}},mounted:function(){var e=this;axios({url:"order",method:"get"}).then((function(t){200===t.data.code&&(e.tableData=t.data.data)}))}},f=p,m=Object(d["a"])(f,n,o,!1,null,"9a80182e",null);t["default"]=m.exports},ab13:function(e,t,r){var n=r("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,r){"use strict";var n=r("23e7"),o=r("4d64").includes,a=r("44d2");n({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-43d44423.ccb3abcf.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b0b8994"],{1148:function(t,e,s){"use strict";var i=s("5926"),a=s("577e"),r=s("1d80");t.exports=function(t){var e=a(r(this)),s="",l=i(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(s+=e);return s}},1175:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:16,offset:4}},[s("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:2,"finish-status":"success",simple:""}},[s("el-step",{attrs:{title:"选购"}}),s("el-step",{attrs:{title:"确认订单"}}),s("el-step",{attrs:{title:"付款"}}),s("el-step",{attrs:{title:"完成"}})],1)],1)],1),s("el-row",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]},[s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:14,offset:4}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("订单信息")])]),s("div",{staticStyle:{"text-align":"left"}},[t._l(t.$store.state.cart,(function(e){return s("div",{key:e.id,staticClass:"text item",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[s("el-tag",{attrs:{size:"medium",effect:"plain"}},[t._v(t._s(e.name))]),s("strong",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(" x "+e.num))])],1)})),s("div",{staticStyle:{float:"right",margin:"10px"}},[s("span",[t._v("合计："+t._s(t.sum))])])],2)])],1)],1),s("el-row",[s("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:14,offset:4}},[null!=t.address&&!1===t.dialogVisible?s("div",[s("div",{staticStyle:{float:"right",margin:"10px"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addAddress}},[t._v("切换地址")])],1),s("el-descriptions",{attrs:{column:1,border:"",title:"收货地址"}},[s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-user"}),t._v(" 用户名 ")]),t._v(" "+t._s(t.address.name)+" ")],2),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-mobile-phone"}),t._v(" 手机号 ")]),t._v(" "+t._s(t.address.phone)+" ")],2),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-office-building"}),t._v(" 联系地址 ")]),t._v(" "+t._s(t.addressDetail)+" ")],2),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-tickets"}),t._v(" 备注 ")]),s("el-tag",{attrs:{size:"small"}},[t._v(t._s(t.address.desc))])],2)],1)],1):s("div",[s("el-empty",{attrs:{description:"还没有收货地址"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.addAddress}},[t._v("添加收货地址")])],1)],1)])],1),s("el-dialog",{attrs:{modal:"",title:"提示",visible:t.dialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("AddressPicker",{attrs:{callback:t.callback}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.saveAddress}},[t._v("保 存")])],1)],1),s("el-row",{staticStyle:{"margin-top":"40px"}},[s("el-col",{attrs:{span:2,offset:16}},[s("el-button",{attrs:{icon:"el-icon-goods",plain:"",round:""},on:{click:function(e){return t.$router.push("/shop")}}},[t._v("取消")])],1),s("el-col",{attrs:{span:2}},[s("el-button",{attrs:{icon:"el-icon-bank-card",type:"danger",round:""},on:{click:t.settleAccount}},[t._v("付款")])],1)],1)],1)},a=[],r=(s("159b"),s("b680"),s("b0c0"),s("b213")),l={name:"Payment",components:{AddressPicker:r["default"]},data:function(){return{dialogVisible:!1,address:null,loading:!1}},mounted:function(){var t=this;axios({url:"address",method:"get"}).then((function(e){200===e.data.code&&(t.address=e.data.data)}))},computed:{sum:function(){var t=0;return this.$store.state.cart.forEach((function(e){t+=e.num*e.price})),t.toFixed(2)},addressDetail:function(){return this.address.province+this.address.city+this.address.district+this.address.detail}},methods:{addAddress:function(){this.dialogVisible=!0},settleAccount:function(){var t=this;this.loading=!0,axios({url:"order/",method:"put",data:{id:this.$store.state.currOrderID,receiverName:this.address.name,receiverPhone:this.address.phone,receiverAddress:this.addressDetail}}).then((function(e){200===e.data.code&&setTimeout((function(){t.loading=!1,t.$router.push("/complete")}),3e3)}))},callback:function(t){this.address=t},saveAddress:function(){axios({method:"post",url:"address",headers:{"Content-Type":"application/json"},data:this.address}).then((function(t){console.log(t)})),this.dialogVisible=!1}}},o=l,n=s("2877"),c=Object(n["a"])(o,i,a,!1,null,"69cddb23",null);e["default"]=c.exports},"408a":function(t,e){var s=1..valueOf;t.exports=function(t){return s.call(t)}},b680:function(t,e,s){"use strict";var i=s("23e7"),a=s("5926"),r=s("408a"),l=s("1148"),o=s("d039"),n=1..toFixed,c=Math.floor,d=function(t,e,s){return 0===e?s:e%2===1?d(t,e-1,s*t):d(t*t,e/2,s)},u=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},p=function(t,e,s){var i=-1,a=s;while(++i<6)a+=e*t[i],t[i]=a%1e7,a=c(a/1e7)},f=function(t,e){var s=6,i=0;while(--s>=0)i+=t[s],t[s]=c(i/e),i=i%e*1e7},m=function(t){var e=6,s="";while(--e>=0)if(""!==s||0===e||0!==t[e]){var i=String(t[e]);s=""===s?i:s+l.call("0",7-i.length)+i}return s},h=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){n.call({})}));i({target:"Number",proto:!0,forced:h},{toFixed:function(t){var e,s,i,o,n=r(this),c=a(t),h=[0,0,0,0,0,0],v="",g="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(v="-",n=-n),n>1e-21)if(e=u(n*d(2,69,1))-69,s=e<0?n*d(2,-e,1):n/d(2,e,1),s*=4503599627370496,e=52-e,e>0){p(h,0,s),i=c;while(i>=7)p(h,1e7,0),i-=7;p(h,d(10,i,1),0),i=e-1;while(i>=23)f(h,1<<23),i-=23;f(h,1<<i),p(h,1,1),f(h,2),g=m(h)}else p(h,0,s),p(h,1<<-e,0),g=m(h)+l.call("0",c);return c>0?(o=g.length,g=v+(o<=c?"0."+l.call("0",c-o)+g:g.slice(0,o-c)+"."+g.slice(o-c))):g=v+g,g}})}}]);
//# sourceMappingURL=chunk-8b0b8994.4fdfe3ec.js.map
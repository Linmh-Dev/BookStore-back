(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d222354"],{ce40:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("el-row",[t("el-col",{attrs:{span:6,offset:9}},[t("el-image",{staticStyle:{"margin-top":"10px",width:"120px",height:"120px","border-radius":"100px"},attrs:{fit:"fill",src:e.avatarUrl}})],1)],1),t("el-row",[t("el-col",{attrs:{span:6,offset:9}},[t("el-upload",{staticClass:"upload-demo",staticStyle:{margin:"15px"},attrs:{"show-file-list":!1,"auto-upload":"","file-list":e.fileList,name:"avatar","on-success":e.uploadSuccess,"on-error":e.uploadError,action:e.$store.state.url+"/avatar",limit:1}},[t("el-button",{attrs:{size:"small",round:""},on:{click:function(r){e.fileList=[]}}},[e._v("更换头像")])],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8,offset:8}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"status-icon":"",rules:e.rules,model:e.ruleForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"pass"}},[t("el-input",{attrs:{"show-password":"",type:"password"},model:{value:e.ruleForm.pass,callback:function(r){e.$set(e.ruleForm,"pass",r)},expression:"ruleForm.pass"}})],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.ruleForm.gender,callback:function(r){e.$set(e.ruleForm,"gender",r)},expression:"ruleForm.gender"}},[t("el-radio",{attrs:{label:"男"}}),t("el-radio",{attrs:{label:"女"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"手机号码",prop:"telphone"}},[t("el-input",{attrs:{type:"tel"},model:{value:e.ruleForm.telephone,callback:function(r){e.$set(e.ruleForm,"telephone",r)},expression:"ruleForm.telephone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{type:"email",autocomplete:"off"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{label:"个人介绍",prop:"introduce"}},[t("el-input",{attrs:{type:"textarea",maxlength:"200","show-word-limit":"",rows:4},model:{value:e.ruleForm.introduce,callback:function(r){e.$set(e.ruleForm,"introduce",r)},expression:"ruleForm.introduce"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("保存 ")])],1)],1)],1)],1)],1)},o=[],l=/^[\w-]+@([\w-]+\.)+[a-zA-Z]{2,4}$/,s=/^[a-zA-Z]\w{0,9}$/,n=/^.{6,16}$/,u=/^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\d{8}$/,i={name:"Person",data:function(){var e=function(e,r,t){""===r?t(new Error("请输入邮箱")):(l.test(r)||t(new Error("请输入有效的邮箱地址")),t())},r=function(e,r,t){""===r?t(new Error("请输入会员名")):(s.test(r)||t(new Error("字母数字下划线1到10位，不能是数字开头")),t())},t=function(e,r,t){""===r?t(new Error("请输入密码")):(n.test(r)||t(new Error("密码不合法")),t())},a=function(e,r,t){""===r?t(new Error("请输入手机号码")):(u.test(r)||t(new Error("请输入有效的手机号码")),t())};return{fileList:[],ruleForm:{name:"",introduce:"",pass:"",gender:"男",email:"",telephone:"",avatar:null},rules:{pass:[{validator:t,trigger:"blur"}],email:[{validator:e,trigger:"blur"}],name:[{validator:r,trigger:"blur"}],telephone:[{validator:a,trigger:"blur"}]}}},computed:{avatarUrl:function(){return""===this.ruleForm.avatar?"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png":null!==this.ruleForm.avatar?this.$store.state.url+this.ruleForm.avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},mounted:function(){var e=this;axios({url:"user",method:"get"}).then((function(r){200===r.data.code&&(e.ruleForm=r.data.data)}))},methods:{uploadSuccess:function(e,r,t){200===e.code?this.ruleForm.avatar=e.data:console.log("上传失败")},uploadError:function(e,r,t){console.log("上传失败")},submitForm:function(e){var r=this;this.$refs[e].validate((function(e){e&&axios({url:"user",method:"put",data:r.ruleForm}).then((function(e){console.log(e),200===e.data.code?(r.$message({message:"修改个人信息成功",type:"success"}),axios({url:"user",method:"get"}).then((function(e){200===e.data.code&&(r.ruleForm=e.data.data,r.$store.commit("PUT_AVATAR",r.ruleForm.avatar))}))):r.$message({message:"修改失败",type:"error"})}))}))}}},m=i,c=t("2877"),p=Object(c["a"])(m,a,o,!1,null,"6975a833",null);r["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d222354.4d8806e5.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4cdb"],{"927c":function(t,e,o){"use strict";o.r(e);var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",[o("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:10,offset:4}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"书名"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"价格"}},[o("div",{staticStyle:{"text-align":"left"}},[o("el-input-number",{attrs:{"controls-position":"right",size:"small",precision:2,min:0,step:1,max:1e3},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)]),o("el-form-item",{attrs:{label:"类型"}},[o("el-radio-group",{model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},[o("div",{staticStyle:{"text-align":"left"}},[o("el-radio",{attrs:{label:"文学"}},[t._v("文学")]),o("el-radio",{attrs:{label:"生活"}},[t._v("生活")]),o("el-radio",{attrs:{label:"计算机"}},[t._v("计算机")]),o("el-radio",{attrs:{label:"外语"}},[t._v("外语")]),o("el-radio",{attrs:{label:"经营"}},[t._v("经营")]),o("el-radio",{attrs:{label:"励志"}},[t._v("励志")]),o("el-radio",{attrs:{label:"科学"}},[t._v("科学")]),o("el-radio",{attrs:{label:"学术"}},[t._v("学术")]),o("el-radio",{attrs:{label:"少儿"}},[t._v("少儿")]),o("el-radio",{attrs:{label:"艺术"}},[t._v("艺术")]),o("el-radio",{attrs:{label:"科技"}},[t._v("科技")]),o("el-radio",{attrs:{label:"考试"}},[t._v("考试")]),o("el-radio",{attrs:{label:"生活百科"}},[t._v("生活百科")])],1)])],1),o("el-form-item",{attrs:{label:"库存数量"}},[o("div",{staticStyle:{"text-align":"left"}},[o("el-input-number",{attrs:{size:"small",min:0,max:1e4},model:{value:t.form.pnum,callback:function(e){t.$set(t.form,"pnum",e)},expression:"form.pnum"}})],1)]),o("el-form-item",{attrs:{label:"书籍描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),o("el-form-item",{attrs:{label:"封面"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","on-success":t.uploadSuccess,"on-error":t.uploadError,multiple:!1,"auto-upload":!1,limit:1,"file-list":t.fileList,name:"cover",action:t.$store.state.url+"/bookCover"}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),o("em",[t._v("点击上传")])]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即添加")]),o("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)],1)],1)},a=[],r={name:"AddBook",props:["book","cancel"],data:function(){return{update:!1,fileList:[],form:{name:"",pnum:0,price:0,category:"",description:"",imgurl:""}}},mounted:function(){console.log(this.book),null!=this.book&&(this.form=this.book,this.update=!0)},methods:{clear:function(){this.form={id:"",name:"",pnum:0,price:0,category:"",description:"",imgurl:""},this.fileList=[]},uploadSuccess:function(t,e,o){var l=this;console.log(t.data),200===t.code?(this.form.imgurl=t.data,axios({method:"post",url:"book",headers:{"Content-Type":"application/json"},data:this.form}).then((function(t){console.log(t),l.$message({message:"上传成功 ",type:"success"}),l.cancel()}),(function(t){console.log(t)}))):console.log("上传失败"),this.clear()},uploadError:function(t,e,o){console.log("上传失败"),this.clear()},onSubmit:function(){var t=this;this.update?axios({url:"book",method:"put",headers:{"Content-Type":"application/json"},data:this.form}).then((function(e){200===e.data.code&&(t.$message({message:"修改成功",type:"success"}),t.cancel())})):this.$refs.upload.submit()}}},s=r,i=o("2877"),n=Object(i["a"])(s,l,a,!1,null,"09665cce",null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0e4cdb.653c4d5e.js.map